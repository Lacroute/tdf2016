webpackJsonp([1,0],[function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}var c=a(1),n=r(c),o=a(12),i=r(o);new n["default"]({el:"body",components:{App:i["default"]}})},,function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var c=a(14),n=r(c);t["default"]={components:{Tdf:n["default"]}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={name:"Race",props:{race:Object},methods:{raceSelected:function(e){this.$dispatch("race-selected",this.race)}}}},function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var c=a(13),n=r(c),o=a(8),i=a(1);i.use(a(15));var s,l;t["default"]={name:"Tdf",components:{Race:n["default"]},data:function(){return{races:[],currentRace:null}},computed:{previousRace:function(){return this.currentRace.stage-1},nextRace:function(){return this.currentRace.stage+1}},ready:function(){this.$http.get("static/tdf2016.geojson").then(function(e){this.jsonReady(JSON.parse(e.body))},function(e){console.log(e)}),s=o.map("mapid").setView([46,2],6),o.tileLayer("https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com">Mapbox</a>',maxZoom:18,id:"mapbox.light",accessToken:"pk.eyJ1IjoibGFjcm91dGUiLCJhIjoiY2lxcDhoZXpqMDA1M2h4bms4YWRyNGlzbiJ9.VLlfBQGaxNFE9M_Ug3YXhQ"}).addTo(s)},methods:{defaultStyle:function(){return{color:"#000",weight:5,opacity:.4}},defaultStyleCircle:function(e,t){return{color:"#333",fillColor:"#000",fillOpacity:.3}},hightlightStyle:function(){return{color:"#f5da3f",weight:3,opacity:1}},hightlightStyleCircleStart:function(){return{color:"#00A388",fillColor:"#79BD8F",fillOpacity:.8}},hightlightStyleCircleEnd:function(){return{color:"#CD2C24",fillColor:"#F2836B",fillOpacity:.8}},getStageFromName:function(e){return parseInt(e.match(/Stage [0-9]+/)[0].replace(/\D/g,""))},jsonReady:function(e){var t=this,a=this;l=o.geoJson(e,{onEachFeature:function(e,t){var r=e.properties.name,c=a.getStageFromName(r),n=r.match(/[0-9]+ km/)[0].replace(/\D/g,"");r=r.split(":")[1];var o=r.split("km")[1],i=e.geometry.coordinates,s=i[0],l=i[i.length-1],u={stage:c,data:{raw:r,name:o,distance:parseInt(n)},start:s,end:l,selected:!1};u.start.circle=a.circleFactory(u.start,a.defaultStyleCircle()),u.end.circle=a.circleFactory(u.end,a.defaultStyleCircle()),a.races.push(u),t.on({click:function(e){var t=a.getStageFromName(e.target.feature.properties.name);a.highlightFeature(t)}})},style:this.defaultStyle}).addTo(s);var r=l._layers,c=function(e){var a=r[e],c=a._leaflet_id,n=t.getStageFromName(a.feature.properties.name),o=t.races.find(function(e){return e.stage===n});o.layerId=c};for(var n in r)c(n)},highlightFeature:function(e){this.currentRace=this.updateRaces(e),this.currentRace.start.circle.setStyle(this.hightlightStyleCircleStart()),this.currentRace.end.circle.setStyle(this.hightlightStyleCircleEnd()),this.updateCamera()},updateRaces:function(e){var t=void 0,a=this;return this.races.some(function(r){r.selected&&(l.getLayer(r.layerId).setStyle(a.defaultStyle()),r.start.circle.setStyle(a.defaultStyleCircle()),r.end.circle.setStyle(a.defaultStyleCircle()),r.selected=!1),r.stage===e&&(r.selected=!0,t=r,l.getLayer(t.layerId).setStyle(a.hightlightStyle()))}),t},updateCamera:function(){var e=o.latLngBounds(o.latLng(this.currentRace.start[1],this.currentRace.start[0]),o.latLng(this.currentRace.end[1],this.currentRace.end[0]));s.fitBounds(e,{animate:!0,pan:{animate:!0,duration:1}})},circleFactory:function(e,t){return o.circle([e[1],e[0]],500,t).addTo(s)}},events:{"race-selected":function(e){this.highlightFeature(e.stage)}}}},function(e,t){},function(e,t){},function(e,t){},,function(e,t){e.exports=" <tdf></tdf> "},function(e,t){e.exports=' <div class=race-selector> <race v-for="race in races | orderBy \'stage\'" :race=race> </race> </div> <section class=race-overview> <header> <div v-if="currentRace != null"> <div class=navigator> <p v-show="previousRace > 0" v-on:click=highlightFeature(previousRace)> Étape {{ previousRace }} ← </p> <p v-show="previousRace < races.length" v-on:click=highlightFeature(nextRace)> → Étape {{ nextRace }} </p> </div> <p> Étape {{ currentRace.stage }} <span>{{ currentRace.data.name }}<span> </span></span></p> </div> <div v-else class=start> <p v-on:click=highlightFeature(1)> Tour de France 2016 <span>Cliquez pour commencer</span> </p> </div> </header> </section> <div id=mapid></div> '},function(e,t){e.exports=' <div v-bind:class="{ \'active\': race.selected }" v-on:click=raceSelected _v-439c647b=""> Étape {{ race.stage }} : {{ race.data.name }} </div> '},function(e,t,a){var r,c;a(5),r=a(2),c=a(9),e.exports=r||{},e.exports.__esModule&&(e.exports=e.exports["default"]),c&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=c)},function(e,t,a){var r,c;a(7),r=a(3),c=a(11),e.exports=r||{},e.exports.__esModule&&(e.exports=e.exports["default"]),c&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=c)},function(e,t,a){var r,c;a(6),r=a(4),c=a(10),e.exports=r||{},e.exports.__esModule&&(e.exports=e.exports["default"]),c&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=c)}]);
//# sourceMappingURL=app.361d9460f9b171ebc0b2.js.map