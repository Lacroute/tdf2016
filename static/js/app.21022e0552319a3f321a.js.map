{"version":3,"sources":["webpack:///static/js/app.21022e0552319a3f321a.js","webpack:///./src/main.js","webpack:///App.vue","webpack:///Race.vue","webpack:///Tdf.vue","webpack:///./src/App.vue?d818","webpack:///./src/components/Tdf.vue?0e48","webpack:///./src/components/Race.vue?6fd3","webpack:///./src/App.vue","webpack:///./src/components/Race.vue","webpack:///./src/components/Tdf.vue"],"names":["webpackJsonp","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","_vue","_vue2","_App","_App2","el","components","App","Object","defineProperty","value","_Tdf","_Tdf2","Tdf","name","props","race","methods","raceSelected","e","this","$dispatch","_Race","_Race2","L","Vue","use","map","layerGroup","Race","data","races","currentRace","computed","previousRace","stage","nextRace","ready","$http","get","then","jsonReady","JSON","parse","body","error","console","log","setView","tileLayer","attribution","maxZoom","id","accessToken","addTo","defaultStyle","color","weight","opacity","defaultStyleCircle","c","f","fillColor","fillOpacity","hightlightStyle","hightlightStyleCircleStart","hightlightStyleCircleEnd","getStageFromName","parseInt","match","replace","tdf","_this","that","geoJson","onEachFeature","feature","layer","featureName","properties","distance","split","coords","geometry","coordinates","start","end","length","raw","selected","circle","circleFactory","push","on","click","target","highlightFeature","style","l","_layers","_loop","i","layerId","_leaflet_id","find","r","updateRaces","setStyle","updateCamera","some","getLayer","bounds","latLngBounds","latLng","fitBounds","animate","pan","duration","events","race-selected","__vue_script__","__vue_template__","options","template"],"mappings":"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","file":"static/js/app.21022e0552319a3f321a.js","sourcesContent":["webpackJsonp([1,0],[\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _vue = __webpack_require__(1);\n\t\n\tvar _vue2 = _interopRequireDefault(_vue);\n\t\n\tvar _App = __webpack_require__(12);\n\t\n\tvar _App2 = _interopRequireDefault(_App);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tnew _vue2.default({\n\t  el: 'body',\n\t  components: { App: _App2.default }\n\t});\n\n/***/ },\n/* 1 */,\n/* 2 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Tdf = __webpack_require__(14);\n\t\n\tvar _Tdf2 = _interopRequireDefault(_Tdf);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t  components: {\n\t    Tdf: _Tdf2.default\n\t  }\n\t};\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = {\n\t  name: 'Race',\n\t\n\t  props: {\n\t    race: Object\n\t  },\n\t\n\t  methods: {\n\t    raceSelected: function raceSelected(e) {\n\t      this.$dispatch('race-selected', this.race);\n\t    }\n\t  }\n\t};\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Race = __webpack_require__(13);\n\t\n\tvar _Race2 = _interopRequireDefault(_Race);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar L = __webpack_require__(8);\n\tvar Vue = __webpack_require__(1);\n\tVue.use(__webpack_require__(15));\n\tvar map;\n\tvar layerGroup;\n\t\n\texports.default = {\n\t  name: 'Tdf',\n\t  components: { Race: _Race2.default },\n\t\n\t  data: function data() {\n\t    return {\n\t      races: [],\n\t      currentRace: null\n\t    };\n\t  },\n\t\n\t\n\t  computed: {\n\t    previousRace: function previousRace() {\n\t      return this.currentRace.stage - 1;\n\t    },\n\t\n\t    nextRace: function nextRace() {\n\t      return this.currentRace.stage + 1;\n\t    }\n\t  },\n\t\n\t  ready: function ready() {\n\t    this.$http.get('static/tdf2016.geojson').then(function (data) {\n\t      this.jsonReady(JSON.parse(data.body));\n\t    }, function (error) {\n\t      console.log(error);\n\t    });\n\t\n\t    map = L.map('mapid').setView([46, 2], 6);\n\t\n\t    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {\n\t      attribution: 'Map data &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"http://mapbox.com\">Mapbox</a>',\n\t      maxZoom: 18,\n\t      id: 'mapbox.light',\n\t      accessToken: 'pk.eyJ1IjoibGFjcm91dGUiLCJhIjoiY2lxcDhoZXpqMDA1M2h4bms4YWRyNGlzbiJ9.VLlfBQGaxNFE9M_Ug3YXhQ'\n\t    }).addTo(map);\n\t  },\n\t\n\t  methods: {\n\t    defaultStyle: function defaultStyle() {\n\t      return {\n\t        color: '#000',\n\t        weight: 5,\n\t        opacity: 0.4\n\t      };\n\t    },\n\t\n\t    defaultStyleCircle: function defaultStyleCircle(c, f) {\n\t      return {\n\t        color: '#333',\n\t        fillColor: '#000',\n\t        fillOpacity: 0.3\n\t      };\n\t    },\n\t\n\t    hightlightStyle: function hightlightStyle() {\n\t      return {\n\t        color: '#f5da3f',\n\t        weight: 3,\n\t        opacity: 1\n\t      };\n\t    },\n\t\n\t    hightlightStyleCircleStart: function hightlightStyleCircleStart() {\n\t      return {\n\t        color: '#00A388',\n\t        fillColor: '#79BD8F',\n\t        fillOpacity: 0.8\n\t      };\n\t    },\n\t\n\t    hightlightStyleCircleEnd: function hightlightStyleCircleEnd() {\n\t      return {\n\t        color: '#CD2C24',\n\t        fillColor: '#F2836B',\n\t        fillOpacity: 0.8\n\t      };\n\t    },\n\t\n\t    getStageFromName: function getStageFromName(name) {\n\t      return parseInt(name.match(/Stage [0-9]+/)[0].replace(/\\D/g, ''));\n\t    },\n\t\n\t    jsonReady: function jsonReady(tdf) {\n\t      var _this = this;\n\t\n\t      var that = this;\n\t\n\t      layerGroup = L.geoJson(tdf, {\n\t        onEachFeature: function onEachFeature(feature, layer) {\n\t          var featureName = feature.properties.name;\n\t          var stage = that.getStageFromName(featureName);\n\t          var distance = featureName.match(/[0-9]+ km/)[0].replace(/\\D/g, '');\n\t          featureName = featureName.split(':')[1];\n\t          var name = featureName.split('km')[1];\n\t          var coords = feature.geometry.coordinates;\n\t          var start = coords[0];\n\t          var end = coords[coords.length - 1];\n\t\n\t          var race = {\n\t            stage: stage,\n\t            data: {\n\t              raw: featureName,\n\t              name: name,\n\t              distance: parseInt(distance)\n\t            },\n\t            start: start,\n\t            end: end,\n\t            selected: false\n\t          };\n\t\n\t          race.start.circle = that.circleFactory(race.start, that.defaultStyleCircle());\n\t          race.end.circle = that.circleFactory(race.end, that.defaultStyleCircle());\n\t\n\t          that.races.push(race);\n\t\n\t          layer.on({\n\t            'click': function click(e) {\n\t              var stage = that.getStageFromName(e.target.feature.properties.name);\n\t              that.highlightFeature(stage);\n\t            }\n\t          });\n\t        },\n\t\n\t        style: this.defaultStyle\n\t      }).addTo(map);\n\t\n\t      var l = layerGroup._layers;\n\t\n\t      var _loop = function _loop(i) {\n\t        var layer = l[i];\n\t        var layerId = layer._leaflet_id;\n\t        var stage = _this.getStageFromName(layer.feature.properties.name);\n\t\n\t        var race = _this.races.find(function (r) {\n\t          return r.stage === stage;\n\t        });\n\t        race.layerId = layerId;\n\t      };\n\t\n\t      for (var i in l) {\n\t        _loop(i);\n\t      }\n\t    },\n\t\n\t    highlightFeature: function highlightFeature(stage) {\n\t      this.currentRace = this.updateRaces(stage);\n\t      this.currentRace.start.circle.setStyle(this.hightlightStyleCircleStart());\n\t      this.currentRace.end.circle.setStyle(this.hightlightStyleCircleEnd());\n\t      this.updateCamera();\n\t    },\n\t\n\t    updateRaces: function updateRaces(stage) {\n\t      var r = void 0;\n\t      var that = this;\n\t      this.races.some(function (race) {\n\t        if (race.selected) {\n\t          layerGroup.getLayer(race.layerId).setStyle(that.defaultStyle());\n\t          race.start.circle.setStyle(that.defaultStyleCircle());\n\t          race.end.circle.setStyle(that.defaultStyleCircle());\n\t          race.selected = false;\n\t        }\n\t        if (race.stage === stage) {\n\t          race.selected = true;\n\t          r = race;\n\t          layerGroup.getLayer(r.layerId).setStyle(that.hightlightStyle());\n\t        }\n\t      });\n\t\n\t      return r;\n\t    },\n\t\n\t    updateCamera: function updateCamera() {\n\t      var bounds = L.latLngBounds(L.latLng(this.currentRace.start[1], this.currentRace.start[0]), L.latLng(this.currentRace.end[1], this.currentRace.end[0]));\n\t\n\t      map.fitBounds(bounds, {\n\t        animate: true,\n\t        pan: {\n\t          animate: true,\n\t          duration: 1\n\t        }\n\t      });\n\t    },\n\t\n\t    circleFactory: function circleFactory(coords, style) {\n\t      return L.circle([coords[1], coords[0]], 500, style).addTo(map);\n\t    }\n\t  },\n\t\n\t  events: {\n\t    'race-selected': function raceSelected(race) {\n\t      this.highlightFeature(race.stage);\n\t    }\n\t  }\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ },\n/* 8 */,\n/* 9 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \" <tdf></tdf> \";\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \" <div class=race-selector> <race v-for=\\\"race in races | orderBy 'stage'\\\" :race=race> </race> </div> <section class=race-overview> <header> <div v-if=\\\"currentRace != null\\\"> <div class=navigator> <p v-show=\\\"previousRace > 0\\\" v-on:click=highlightFeature(previousRace)> Étape {{ previousRace }} ← </p> <p v-show=\\\"previousRace < races.length\\\" v-on:click=highlightFeature(nextRace)> → Étape {{ nextRace }} </p> </div> <p> Étape {{ currentRace.stage }} <span>{{ currentRace.data.name }}<span> </span></span></p> </div> <div v-else class=start> <p v-on:click=highlightFeature(1)> Tour de France 2016 <span>Cliquez pour commencer</span> </p> </div> </header> </section> <div id=mapid></div> \";\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \" <div v-bind:class=\\\"{ 'active': race.selected }\\\" v-on:click=raceSelected _v-439c647b=\\\"\\\"> Étape {{ race.stage }} : {{ race.data.name }} </div> \";\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__webpack_require__(5)\n\t__vue_script__ = __webpack_require__(2)\n\t__vue_template__ = __webpack_require__(9)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__webpack_require__(7)\n\t__vue_script__ = __webpack_require__(3)\n\t__vue_template__ = __webpack_require__(11)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __vue_script__, __vue_template__\n\t__webpack_require__(6)\n\t__vue_script__ = __webpack_require__(4)\n\t__vue_template__ = __webpack_require__(10)\n\tmodule.exports = __vue_script__ || {}\n\tif (module.exports.__esModule) module.exports = module.exports.default\n\tif (__vue_template__) {\n\t(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n\t}\n\n\n/***/ }\n]);\n\n\n/** WEBPACK FOOTER **\n ** static/js/app.21022e0552319a3f321a.js\n **/","import Vue from 'vue'\r\nimport App from './App'\r\n\r\n/* eslint-disable no-new */\r\nnew Vue({\r\n  el: 'body',\r\n  components: { App }\r\n})\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/main.js\n **/","<template>\r\n  <tdf></tdf>\r\n</template>\r\n\r\n<script>\r\nimport Tdf from './components/Tdf'\r\n\r\nexport default {\r\n  components: {\r\n    Tdf\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\nhtml {\r\n  height: 100%;\r\n}\r\n\r\nbody {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  margin: 0;\r\n  padding: 0;\r\n}\r\n\r\n/***************/\r\n/* LEAFLET.CSS */\r\n/***************/\r\n\r\n/* required styles */\r\n\r\n.leaflet-map-pane,\r\n.leaflet-tile,\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow,\r\n.leaflet-tile-pane,\r\n.leaflet-tile-container,\r\n.leaflet-overlay-pane,\r\n.leaflet-shadow-pane,\r\n.leaflet-marker-pane,\r\n.leaflet-popup-pane,\r\n.leaflet-overlay-pane svg,\r\n.leaflet-zoom-box,\r\n.leaflet-image-layer,\r\n.leaflet-layer {\r\n\tposition: absolute;\r\n\tleft: 0;\r\n\ttop: 0;\r\n\t}\r\n.leaflet-container {\r\n\toverflow: hidden;\r\n\t-ms-touch-action: none;\r\n\ttouch-action: none;\r\n\t}\r\n.leaflet-tile,\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow {\r\n\t-webkit-user-select: none;\r\n\t   -moz-user-select: none;\r\n\t        user-select: none;\r\n\t-webkit-user-drag: none;\r\n\t}\r\n.leaflet-marker-icon,\r\n.leaflet-marker-shadow {\r\n\tdisplay: block;\r\n\t}\r\n/* map is broken in FF if you have max-width: 100% on tiles */\r\n.leaflet-container img {\r\n\tmax-width: none !important;\r\n\t}\r\n/* stupid Android 2 doesn't understand \"max-width: none\" properly */\r\n.leaflet-container img.leaflet-image-layer {\r\n\tmax-width: 15000px !important;\r\n\t}\r\n.leaflet-tile {\r\n\tfilter: inherit;\r\n\tvisibility: hidden;\r\n\t}\r\n.leaflet-tile-loaded {\r\n\tvisibility: inherit;\r\n\t}\r\n.leaflet-zoom-box {\r\n\twidth: 0;\r\n\theight: 0;\r\n\t}\r\n/* workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=888319 */\r\n.leaflet-overlay-pane svg {\r\n\t-moz-user-select: none;\r\n\t}\r\n\r\n.leaflet-tile-pane    { z-index: 2; }\r\n.leaflet-objects-pane { z-index: 3; }\r\n.leaflet-overlay-pane { z-index: 4; }\r\n.leaflet-shadow-pane  { z-index: 5; }\r\n.leaflet-marker-pane  { z-index: 6; }\r\n.leaflet-popup-pane   { z-index: 7; }\r\n\r\n.leaflet-vml-shape {\r\n\twidth: 1px;\r\n\theight: 1px;\r\n\t}\r\n.lvml {\r\n\tbehavior: url(#default#VML);\r\n\tdisplay: inline-block;\r\n\tposition: absolute;\r\n\t}\r\n\r\n\r\n/* control positioning */\r\n\r\n.leaflet-control {\r\n\tposition: relative;\r\n\tz-index: 7;\r\n\tpointer-events: auto;\r\n\t}\r\n.leaflet-top,\r\n.leaflet-bottom {\r\n\tposition: absolute;\r\n\tz-index: 1000;\r\n\tpointer-events: none;\r\n\t}\r\n.leaflet-top {\r\n\ttop: 0;\r\n\t}\r\n.leaflet-right {\r\n\tright: 0;\r\n\t}\r\n.leaflet-bottom {\r\n\tbottom: 0;\r\n\t}\r\n.leaflet-left {\r\n\tleft: 0;\r\n\t}\r\n.leaflet-control {\r\n\tfloat: left;\r\n\tclear: both;\r\n\t}\r\n.leaflet-right .leaflet-control {\r\n\tfloat: right;\r\n\t}\r\n.leaflet-top .leaflet-control {\r\n\tmargin-top: 10px;\r\n\t}\r\n.leaflet-bottom .leaflet-control {\r\n\tmargin-bottom: 10px;\r\n\t}\r\n.leaflet-left .leaflet-control {\r\n\tmargin-left: 10px;\r\n\t}\r\n.leaflet-right .leaflet-control {\r\n\tmargin-right: 10px;\r\n\t}\r\n\r\n\r\n/* zoom and fade animations */\r\n\r\n.leaflet-fade-anim .leaflet-tile,\r\n.leaflet-fade-anim .leaflet-popup {\r\n\topacity: 0;\r\n\t-webkit-transition: opacity 0.2s linear;\r\n\t   -moz-transition: opacity 0.2s linear;\r\n\t     -o-transition: opacity 0.2s linear;\r\n\t        transition: opacity 0.2s linear;\r\n\t}\r\n.leaflet-fade-anim .leaflet-tile-loaded,\r\n.leaflet-fade-anim .leaflet-map-pane .leaflet-popup {\r\n\topacity: 1;\r\n\t}\r\n\r\n.leaflet-zoom-anim .leaflet-zoom-animated {\r\n\t-webkit-transition: -webkit-transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t   -moz-transition:    -moz-transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t     -o-transition:      -o-transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t        transition:         transform 0.25s cubic-bezier(0,0,0.25,1);\r\n\t}\r\n.leaflet-zoom-anim .leaflet-tile,\r\n.leaflet-pan-anim .leaflet-tile,\r\n.leaflet-touching .leaflet-zoom-animated {\r\n\t-webkit-transition: none;\r\n\t   -moz-transition: none;\r\n\t     -o-transition: none;\r\n\t        transition: none;\r\n\t}\r\n\r\n.leaflet-zoom-anim .leaflet-zoom-hide {\r\n\tvisibility: hidden;\r\n\t}\r\n\r\n\r\n/* cursors */\r\n\r\n.leaflet-clickable {\r\n\tcursor: pointer;\r\n\t}\r\n.leaflet-container {\r\n\tcursor: -webkit-grab;\r\n\tcursor:    -moz-grab;\r\n\t}\r\n.leaflet-popup-pane,\r\n.leaflet-control {\r\n\tcursor: auto;\r\n\t}\r\n.leaflet-dragging .leaflet-container,\r\n.leaflet-dragging .leaflet-clickable {\r\n\tcursor: move;\r\n\tcursor: -webkit-grabbing;\r\n\tcursor:    -moz-grabbing;\r\n\t}\r\n\r\n\r\n/* visual tweaks */\r\n\r\n.leaflet-container {\r\n\tbackground: #ddd;\r\n\toutline: 0;\r\n\t}\r\n.leaflet-container a {\r\n\tcolor: #0078A8;\r\n\t}\r\n.leaflet-container a.leaflet-active {\r\n\toutline: 2px solid orange;\r\n\t}\r\n.leaflet-zoom-box {\r\n\tborder: 2px dotted #38f;\r\n\tbackground: rgba(255,255,255,0.5);\r\n\t}\r\n\r\n\r\n/* general typography */\r\n.leaflet-container {\r\n\tfont: 12px/1.5 \"Helvetica Neue\", Arial, Helvetica, sans-serif;\r\n\t}\r\n\r\n\r\n/* general toolbar styles */\r\n\r\n.leaflet-bar {\r\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.65);\r\n\tborder-radius: 4px;\r\n\t}\r\n.leaflet-bar a,\r\n.leaflet-bar a:hover {\r\n\tbackground-color: #fff;\r\n\tborder-bottom: 1px solid #ccc;\r\n\twidth: 26px;\r\n\theight: 26px;\r\n\tline-height: 26px;\r\n\tdisplay: block;\r\n\ttext-align: center;\r\n\ttext-decoration: none;\r\n\tcolor: black;\r\n\t}\r\n.leaflet-bar a,\r\n.leaflet-control-layers-toggle {\r\n\tbackground-position: 50% 50%;\r\n\tbackground-repeat: no-repeat;\r\n\tdisplay: block;\r\n\t}\r\n.leaflet-bar a:hover {\r\n\tbackground-color: #f4f4f4;\r\n\t}\r\n.leaflet-bar a:first-child {\r\n\tborder-top-left-radius: 4px;\r\n\tborder-top-right-radius: 4px;\r\n\t}\r\n.leaflet-bar a:last-child {\r\n\tborder-bottom-left-radius: 4px;\r\n\tborder-bottom-right-radius: 4px;\r\n\tborder-bottom: none;\r\n\t}\r\n.leaflet-bar a.leaflet-disabled {\r\n\tcursor: default;\r\n\tbackground-color: #f4f4f4;\r\n\tcolor: #bbb;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-bar a {\r\n\twidth: 30px;\r\n\theight: 30px;\r\n\tline-height: 30px;\r\n\t}\r\n\r\n\r\n/* zoom control */\r\n\r\n.leaflet-control-zoom-in,\r\n.leaflet-control-zoom-out {\r\n\tfont: bold 18px 'Lucida Console', Monaco, monospace;\r\n\ttext-indent: 1px;\r\n\t}\r\n.leaflet-control-zoom-out {\r\n\tfont-size: 20px;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-control-zoom-in {\r\n\tfont-size: 22px;\r\n\t}\r\n.leaflet-touch .leaflet-control-zoom-out {\r\n\tfont-size: 24px;\r\n\t}\r\n\r\n\r\n/* layers control */\r\n\r\n.leaflet-control-layers {\r\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.4);\r\n\tbackground: #fff;\r\n\tborder-radius: 5px;\r\n\t}\r\n.leaflet-control-layers-toggle {\r\n\tbackground-image: url(http://cdn.leafletjs.com/leaflet/v0.7.7/images/layers.png);\r\n\twidth: 36px;\r\n\theight: 36px;\r\n\t}\r\n.leaflet-retina .leaflet-control-layers-toggle {\r\n\tbackground-image: url(http://cdn.leafletjs.com/leaflet/v0.7.7/images/layers-2x.png);\r\n\tbackground-size: 26px 26px;\r\n\t}\r\n.leaflet-touch .leaflet-control-layers-toggle {\r\n\twidth: 44px;\r\n\theight: 44px;\r\n\t}\r\n.leaflet-control-layers .leaflet-control-layers-list,\r\n.leaflet-control-layers-expanded .leaflet-control-layers-toggle {\r\n\tdisplay: none;\r\n\t}\r\n.leaflet-control-layers-expanded .leaflet-control-layers-list {\r\n\tdisplay: block;\r\n\tposition: relative;\r\n\t}\r\n.leaflet-control-layers-expanded {\r\n\tpadding: 6px 10px 6px 6px;\r\n\tcolor: #333;\r\n\tbackground: #fff;\r\n\t}\r\n.leaflet-control-layers-selector {\r\n\tmargin-top: 2px;\r\n\tposition: relative;\r\n\ttop: 1px;\r\n\t}\r\n.leaflet-control-layers label {\r\n\tdisplay: block;\r\n\t}\r\n.leaflet-control-layers-separator {\r\n\theight: 0;\r\n\tborder-top: 1px solid #ddd;\r\n\tmargin: 5px -10px 5px -6px;\r\n\t}\r\n\r\n\r\n/* attribution and scale controls */\r\n\r\n.leaflet-container .leaflet-control-attribution {\r\n\tbackground: #fff;\r\n\tbackground: rgba(255, 255, 255, 0.7);\r\n\tmargin: 0;\r\n\t}\r\n.leaflet-control-attribution,\r\n.leaflet-control-scale-line {\r\n\tpadding: 0 5px;\r\n\tcolor: #333;\r\n\t}\r\n.leaflet-control-attribution a {\r\n\ttext-decoration: none;\r\n\t}\r\n.leaflet-control-attribution a:hover {\r\n\ttext-decoration: underline;\r\n\t}\r\n.leaflet-container .leaflet-control-attribution,\r\n.leaflet-container .leaflet-control-scale {\r\n\tfont-size: 11px;\r\n\t}\r\n.leaflet-left .leaflet-control-scale {\r\n\tmargin-left: 5px;\r\n\t}\r\n.leaflet-bottom .leaflet-control-scale {\r\n\tmargin-bottom: 5px;\r\n\t}\r\n.leaflet-control-scale-line {\r\n\tborder: 2px solid #777;\r\n\tborder-top: none;\r\n\tline-height: 1.1;\r\n\tpadding: 2px 5px 1px;\r\n\tfont-size: 11px;\r\n\twhite-space: nowrap;\r\n\toverflow: hidden;\r\n\t-moz-box-sizing: content-box;\r\n\t     box-sizing: content-box;\r\n\r\n\tbackground: #fff;\r\n\tbackground: rgba(255, 255, 255, 0.5);\r\n\t}\r\n.leaflet-control-scale-line:not(:first-child) {\r\n\tborder-top: 2px solid #777;\r\n\tborder-bottom: none;\r\n\tmargin-top: -2px;\r\n\t}\r\n.leaflet-control-scale-line:not(:first-child):not(:last-child) {\r\n\tborder-bottom: 2px solid #777;\r\n\t}\r\n\r\n.leaflet-touch .leaflet-control-attribution,\r\n.leaflet-touch .leaflet-control-layers,\r\n.leaflet-touch .leaflet-bar {\r\n\tbox-shadow: none;\r\n\t}\r\n.leaflet-touch .leaflet-control-layers,\r\n.leaflet-touch .leaflet-bar {\r\n\tborder: 2px solid rgba(0,0,0,0.2);\r\n\tbackground-clip: padding-box;\r\n\t}\r\n\r\n\r\n/* popup */\r\n\r\n.leaflet-popup {\r\n\tposition: absolute;\r\n\ttext-align: center;\r\n\t}\r\n.leaflet-popup-content-wrapper {\r\n\tpadding: 1px;\r\n\ttext-align: left;\r\n\tborder-radius: 12px;\r\n\t}\r\n.leaflet-popup-content {\r\n\tmargin: 13px 19px;\r\n\tline-height: 1.4;\r\n\t}\r\n.leaflet-popup-content p {\r\n\tmargin: 18px 0;\r\n\t}\r\n.leaflet-popup-tip-container {\r\n\tmargin: 0 auto;\r\n\twidth: 40px;\r\n\theight: 20px;\r\n\tposition: relative;\r\n\toverflow: hidden;\r\n\t}\r\n.leaflet-popup-tip {\r\n\twidth: 17px;\r\n\theight: 17px;\r\n\tpadding: 1px;\r\n\r\n\tmargin: -10px auto 0;\r\n\r\n\t-webkit-transform: rotate(45deg);\r\n\t   -moz-transform: rotate(45deg);\r\n\t    -ms-transform: rotate(45deg);\r\n\t     -o-transform: rotate(45deg);\r\n\t        transform: rotate(45deg);\r\n\t}\r\n.leaflet-popup-content-wrapper,\r\n.leaflet-popup-tip {\r\n\tbackground: white;\r\n\r\n\tbox-shadow: 0 3px 14px rgba(0,0,0,0.4);\r\n\t}\r\n.leaflet-container a.leaflet-popup-close-button {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tright: 0;\r\n\tpadding: 4px 4px 0 0;\r\n\ttext-align: center;\r\n\twidth: 18px;\r\n\theight: 14px;\r\n\tfont: 16px/14px Tahoma, Verdana, sans-serif;\r\n\tcolor: #c3c3c3;\r\n\ttext-decoration: none;\r\n\tfont-weight: bold;\r\n\tbackground: transparent;\r\n\t}\r\n.leaflet-container a.leaflet-popup-close-button:hover {\r\n\tcolor: #999;\r\n\t}\r\n.leaflet-popup-scrolled {\r\n\toverflow: auto;\r\n\tborder-bottom: 1px solid #ddd;\r\n\tborder-top: 1px solid #ddd;\r\n\t}\r\n\r\n.leaflet-oldie .leaflet-popup-content-wrapper {\r\n\tzoom: 1;\r\n\t}\r\n.leaflet-oldie .leaflet-popup-tip {\r\n\twidth: 24px;\r\n\tmargin: 0 auto;\r\n\r\n\t-ms-filter: \"progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678)\";\r\n\tfilter: progid:DXImageTransform.Microsoft.Matrix(M11=0.70710678, M12=0.70710678, M21=-0.70710678, M22=0.70710678);\r\n\t}\r\n.leaflet-oldie .leaflet-popup-tip-container {\r\n\tmargin-top: -1px;\r\n\t}\r\n\r\n.leaflet-oldie .leaflet-control-zoom,\r\n.leaflet-oldie .leaflet-control-layers,\r\n.leaflet-oldie .leaflet-popup-content-wrapper,\r\n.leaflet-oldie .leaflet-popup-tip {\r\n\tborder: 1px solid #999;\r\n\t}\r\n\r\n\r\n/* div icon */\r\n\r\n.leaflet-div-icon {\r\n\tbackground: #fff;\r\n\tborder: 1px solid #666;\r\n\t}\r\n\r\n  /******************/\r\n  /* END LEAFLET.CSS*/\r\n  /******************/\r\n\r\n</style>\r\n\n\n\n/** WEBPACK FOOTER **\n ** App.vue?3f801377\n **/","<template>\r\n  <div v-bind:class=\"{ 'active': race.selected }\" v-on:click=raceSelected>\r\n    Étape {{ race.stage }} : {{ race.data.name }}\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Race',\r\n\r\n  props: {\r\n    race: Object\r\n  },\r\n\r\n  methods: {\r\n    raceSelected: function (e) {\r\n      this.$dispatch('race-selected', this.race)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ndiv{\r\n  color: #000;\r\n  font-family: 'Lato', sans-serif;\r\n  font-weight: 300;\r\n}\r\n.active {\r\n  background: #f5da3f;\r\n  font-weight: 700;\r\n}\r\n\r\ndiv:hover{\r\n  cursor: pointer;\r\n  background: rgba(255, 255, 0, 0.6);\r\n}\r\n</style>\r\n\n\n\n/** WEBPACK FOOTER **\n ** Race.vue?44ca0d76\n **/","<template>\r\n  <div class=\"race-selector\">\r\n    <race v-for=\"race in races | orderBy 'stage'\"\r\n      :race=\"race\">\r\n    </race>\r\n  </div>\r\n  <section class=\"race-overview\">\r\n    <header>\r\n      <div v-if=\"currentRace != null\">\r\n        <div class=\"navigator\">\r\n          <p v-show=\"previousRace > 0\" v-on:click=highlightFeature(previousRace)>\r\n            Étape {{ previousRace }} ←\r\n          </p>\r\n          <p v-show=\"previousRace < races.length\" v-on:click=highlightFeature(nextRace)>\r\n            → Étape {{ nextRace }}\r\n          </p>\r\n        </div>\r\n\r\n        <p>\r\n          Étape {{ currentRace.stage }}\r\n        <span>{{ currentRace.data.name }}<span>\r\n        </p>\r\n      </div>\r\n      <div v-else class=\"start\">\r\n        <p v-on:click=highlightFeature(1)>\r\n          Tour de France 2016\r\n          <span>Cliquez pour commencer</span>\r\n        </p>\r\n      </div>\r\n    </header>\r\n  </section>\r\n  <div id=\"mapid\"></div>\r\n</template>\r\n\r\n<script>\r\nimport Race from './Race.vue'\r\n\r\nvar L = require('leaflet')\r\nvar Vue = require('vue')\r\nVue.use(require('vue-resource'))\r\nvar map\r\nvar layerGroup\r\n\r\nexport default {\r\n  name: 'Tdf',\r\n  components: {Race},\r\n\r\n  data () {\r\n    return {\r\n      races: [],\r\n      currentRace: null\r\n    }\r\n  },\r\n\r\n  computed: {\r\n    // Return the previous race\r\n    previousRace: function () {\r\n      return this.currentRace.stage - 1\r\n    },\r\n\r\n    // Return the next race\r\n    nextRace: function () {\r\n      return this.currentRace.stage + 1\r\n    }\r\n  },\r\n\r\n  ready: function () {\r\n    // Get asynchronous data.\r\n    this.$http.get('static/tdf2016.geojson').then(\r\n      function (data) {\r\n        this.jsonReady(JSON.parse(data.body))\r\n      },\r\n      function (error) {\r\n        console.log(error)\r\n      }\r\n    )\r\n\r\n    // Build the map.\r\n    map = L.map('mapid').setView([46, 2], 6)\r\n\r\n    // Set custom tile layer from mapbox\r\n    L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {\r\n      attribution: 'Map data &copy; <a href=\"http://openstreetmap.org\">OpenStreetMap</a> contributors, <a href=\"http://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imagery © <a href=\"http://mapbox.com\">Mapbox</a>',\r\n      maxZoom: 18,\r\n      id: 'mapbox.light',\r\n      accessToken: 'pk.eyJ1IjoibGFjcm91dGUiLCJhIjoiY2lxcDhoZXpqMDA1M2h4bms4YWRyNGlzbiJ9.VLlfBQGaxNFE9M_Ug3YXhQ'\r\n    }).addTo(map)\r\n  },\r\n\r\n  methods: {\r\n\r\n    // Defult style for the race vectors.\r\n    defaultStyle: function () {\r\n      return {\r\n        color: '#000',\r\n        weight: 5,\r\n        opacity: 0.4\r\n      }\r\n    },\r\n\r\n    // Default style for the cities\r\n    defaultStyleCircle: function (c, f) {\r\n      return {\r\n        color: '#333',\r\n        fillColor: '#000',\r\n        fillOpacity: 0.3\r\n      }\r\n    },\r\n\r\n    // When a race is on focus.\r\n    hightlightStyle: function () {\r\n      return {\r\n        color: '#f5da3f',\r\n        weight: 3,\r\n        opacity: 1\r\n      }\r\n    },\r\n\r\n    // Highlight city circle start\r\n    hightlightStyleCircleStart: function () {\r\n      return {\r\n        color: '#00A388',\r\n        fillColor: '#79BD8F',\r\n        fillOpacity: 0.8\r\n      }\r\n    },\r\n\r\n    // Highlight city circle end\r\n    hightlightStyleCircleEnd: function () {\r\n      return {\r\n        color: '#CD2C24',\r\n        fillColor: '#F2836B',\r\n        fillOpacity: 0.8\r\n      }\r\n    },\r\n\r\n    // Helper to extract the integer stage from the string name.\r\n    getStageFromName (name) {\r\n      return parseInt(name.match(/Stage [0-9]+/)[0].replace(/\\D/g, ''))\r\n    },\r\n\r\n    // When data is loaded.\r\n    jsonReady: function (tdf) {\r\n      var that = this\r\n\r\n      layerGroup = L.geoJson(\r\n        tdf,\r\n        {\r\n          onEachFeature: function (feature, layer) {\r\n            // Clean data to build better format.\r\n            var featureName = feature.properties.name\r\n            var stage = that.getStageFromName(featureName)\r\n            var distance = featureName.match(/[0-9]+ km/)[0].replace(/\\D/g, '')\r\n            featureName = featureName.split(':')[1]\r\n            var name = featureName.split('km')[1]\r\n            var coords = feature.geometry.coordinates\r\n            var start = coords[0]\r\n            var end = coords[coords.length - 1]\r\n\r\n            // Store it.\r\n            let race = {\r\n              stage: stage,\r\n              data: {\r\n                raw: featureName,\r\n                name: name,\r\n                distance: parseInt(distance)\r\n              },\r\n              start: start,\r\n              end: end,\r\n              selected: false\r\n            }\r\n\r\n            // Draw default start and end circles.\r\n            race.start.circle = that.circleFactory(race.start, that.defaultStyleCircle())\r\n            race.end.circle = that.circleFactory(race.end, that.defaultStyleCircle())\r\n\r\n            that.races.push(race)\r\n\r\n            layer.on(\r\n              {\r\n                'click': function (e) {\r\n                  // highlight the feature\r\n                  var stage = that.getStageFromName(e.target.feature.properties.name)\r\n                  that.highlightFeature(stage)\r\n                }\r\n              })\r\n          },\r\n\r\n          style: this.defaultStyle\r\n        }\r\n      ).addTo(map)\r\n\r\n      // Iterate through the layer because the _leaflet_id is not readable in onEachFeature function\r\n      let l = layerGroup._layers\r\n      for (let i in l) {\r\n        let layer = l[i]\r\n        let layerId = layer._leaflet_id\r\n        let stage = this.getStageFromName(layer.feature.properties.name)\r\n\r\n        let race = this.races.find(function (r) {\r\n          return r.stage === stage\r\n        })\r\n        race.layerId = layerId\r\n      }\r\n    },\r\n\r\n    // Main function for higlighting.\r\n    highlightFeature: function (stage) {\r\n      this.currentRace = this.updateRaces(stage)\r\n      this.currentRace.start.circle.setStyle(this.hightlightStyleCircleStart())\r\n      this.currentRace.end.circle.setStyle(this.hightlightStyleCircleEnd())\r\n      this.updateCamera()\r\n    },\r\n\r\n    // Update all the races.\r\n    updateRaces: function (stage) {\r\n      let r\r\n      let that = this\r\n      this.races.some(function (race) {\r\n        if (race.selected) {\r\n          layerGroup.getLayer(race.layerId).setStyle(\r\n            that.defaultStyle()\r\n          )\r\n          race.start.circle.setStyle(that.defaultStyleCircle())\r\n          race.end.circle.setStyle(that.defaultStyleCircle())\r\n          race.selected = false\r\n        }\r\n        if (race.stage === stage) {\r\n          race.selected = true\r\n          r = race\r\n          layerGroup.getLayer(r.layerId).setStyle(\r\n            that.hightlightStyle()\r\n          )\r\n        }\r\n      })\r\n\r\n      return r\r\n    },\r\n\r\n    // Move the camera to the specific race\r\n    updateCamera: function () {\r\n      var bounds = L.latLngBounds(\r\n        L.latLng(this.currentRace.start[1], this.currentRace.start[0]),\r\n        L.latLng(this.currentRace.end[1], this.currentRace.end[0])\r\n      )\r\n\r\n      // map.panInsideBounds(bounds)\r\n      map.fitBounds(\r\n        bounds,\r\n        {\r\n          animate: true,\r\n          pan: {\r\n            animate: true,\r\n            duration: 1\r\n          }\r\n        }\r\n      )\r\n    },\r\n\r\n    // Helper to draw circles.\r\n    circleFactory: function (coords, style) {\r\n      return L.circle(\r\n        [coords[1], coords[0]],\r\n        500,\r\n        style\r\n      ).addTo(map)\r\n    }\r\n  },\r\n\r\n  // Triggers when race emits events.\r\n  events: {\r\n\r\n    // On click\r\n    'race-selected': function (race) {\r\n      this.highlightFeature(race.stage)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n/*.stage-1 { fill: red; }*/\r\n#mapid {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n\r\n.start{\r\n  cursor: pointer;\r\n}\r\n\r\n.race-overview{\r\n  font-family: 'Lato', sans-serif;\r\n  font-weight: 300;\r\n  position: absolute;\r\n  top: 20px;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  z-index: 1;\r\n  background: #f5da3f;\r\n  color: #000;\r\n}\r\n\r\n.race-overview p{\r\n  text-align: center;\r\n  font-size: 1.250rem;\r\n  margin: 1em;\r\n  letter-spacing: 0.1em;\r\n}\r\n\r\n.race-overview p span{\r\n  display: block;\r\n  margin: auto;\r\n  font-size: 1.500rem;\r\n  text-transform: uppercase;\r\n  margin-top: 15px;\r\n  font-weight: 700;\r\n}\r\n\r\n.race-selector{\r\n  background: rgba(0, 0, 0, 0.1);\r\n  color: #fff;\r\n  position: absolute;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  z-index: 9999;\r\n}\r\n\r\n.navigator{\r\n  position: absolute;\r\n  width: 150%;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n}\r\n.navigator p{\r\n  color: #fff;\r\n  background: #000;\r\n  display: inline-block;\r\n  padding: 1em;\r\n  margin: 0 -2.7em;\r\n  cursor: pointer;\r\n}\r\n\r\n.navigator p + p{\r\n  float: right;\r\n}\r\n</style>\r\n\n\n\n/** WEBPACK FOOTER **\n ** Tdf.vue?4d914d48\n **/","module.exports = \" <tdf></tdf> \";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n ** module id = 9\n ** module chunks = 1\n **/","module.exports = \" <div class=race-selector> <race v-for=\\\"race in races | orderBy 'stage'\\\" :race=race> </race> </div> <section class=race-overview> <header> <div v-if=\\\"currentRace != null\\\"> <div class=navigator> <p v-show=\\\"previousRace > 0\\\" v-on:click=highlightFeature(previousRace)> Étape {{ previousRace }} ← </p> <p v-show=\\\"previousRace < races.length\\\" v-on:click=highlightFeature(nextRace)> → Étape {{ nextRace }} </p> </div> <p> Étape {{ currentRace.stage }} <span>{{ currentRace.data.name }}<span> </span></span></p> </div> <div v-else class=start> <p v-on:click=highlightFeature(1)> Tour de France 2016 <span>Cliquez pour commencer</span> </p> </div> </header> </section> <div id=mapid></div> \";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-html-loader!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Tdf.vue\n ** module id = 10\n ** module chunks = 1\n **/","module.exports = \" <div v-bind:class=\\\"{ 'active': race.selected }\\\" v-on:click=raceSelected _v-439c647b=\\\"\\\"> Étape {{ race.stage }} : {{ race.data.name }} </div> \";\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/vue-html-loader!./~/vue-loader/lib/template-rewriter.js?id=_v-439c647b!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/Race.vue\n ** module id = 11\n ** module chunks = 1\n **/","var __vue_script__, __vue_template__\nrequire(\"!!./../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!./../node_modules/vue-loader/lib/style-rewriter.js!./../node_modules/vue-loader/lib/selector.js?type=style&index=0!./App.vue\")\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!./../node_modules/vue-loader/lib/selector.js?type=script&index=0!./App.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../node_modules/vue-loader/lib/selector.js?type=template&index=0!./App.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/App.vue\n ** module id = 12\n ** module chunks = 1\n **/","var __vue_script__, __vue_template__\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter.js?id=_v-439c647b&scoped=true!./../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./Race.vue\")\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!./../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./Race.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../../node_modules/vue-loader/lib/template-rewriter.js?id=_v-439c647b!./../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./Race.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/Race.vue\n ** module id = 13\n ** module chunks = 1\n **/","var __vue_script__, __vue_template__\nrequire(\"!!./../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"extract\\\":true,\\\"remove\\\":true}!vue-style-loader!css-loader?sourceMap!./../../node_modules/vue-loader/lib/style-rewriter.js!./../../node_modules/vue-loader/lib/selector.js?type=style&index=0!./Tdf.vue\")\n__vue_script__ = require(\"!!babel-loader?presets[]=es2015&plugins[]=transform-runtime&comments=false!./../../node_modules/vue-loader/lib/selector.js?type=script&index=0!./Tdf.vue\")\n__vue_template__ = require(\"!!vue-html-loader!./../../node_modules/vue-loader/lib/selector.js?type=template&index=0!./Tdf.vue\")\nmodule.exports = __vue_script__ || {}\nif (module.exports.__esModule) module.exports = module.exports.default\nif (__vue_template__) {\n(typeof module.exports === \"function\" ? (module.exports.options || (module.exports.options = {})) : module.exports).template = __vue_template__\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/components/Tdf.vue\n ** module id = 14\n ** module chunks = 1\n **/"],"sourceRoot":""}